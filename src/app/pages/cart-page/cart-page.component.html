<div class="container p-5 limit-width">

    <!-- BACK TO PRODUCTS -->
    <div class="col my-1">
        <button type="button" class="btn btn-outline-primary"
        [routerLink]="['/products']">Back To Products</button>
    </div>
    
    <hr>

    <!-- TITLE -->
    <div class="container rounded-4 py-3" [appDarkModeBackground]="'default'">
        <div class="d-flex flex-row justify-content-between align-items-center mx-4">
            <h3>Order</h3>
            <h5>
                Your Cart
                <i class="bi bi-bag"></i>
            </h5>
        </div>
    </div>

    <hr>

    <!-- CARDS AND QUANTITIES-->
    <div class="container rounded-4 py-3" [appDarkModeBackground]="'default'">
        <div *ngFor="let item of cartItems; let i = index">
            <div class="d-flex flex-row justify-content-between mx-2 my-4">

                <!-- THE CARD-->
                <div class="col-6 d-flex mx-auto">
                    <app-product-card 
                    [productCard]="item.product"
                    [selectedProductId]="selectedId"
                    [showDetailsButton]="false">
                    </app-product-card>
                </div>

                <!-- QUANTITY AND ADD, REMOVE BUTTONS-->
                <div class="col-4 p-2 text-center d-flex flex-column align-items-center justify-content-center">
                        <button type="button" class="btn btn-outline-danger m-2" (click)="decreaseProduct(item.product.id!)" [appDarkModeBackground]="'default'">
                            <strong>➖</strong>
                        </button>
                        <span>
                            <strong>
                                {{ item.quantity! }}
                            </strong>
                        </span>
                        <button type="button" class="btn btn-outline-success m-2" (click)="increaseProduct(item.product.id!)" [appDarkModeBackground]="'default'">
                            <strong>➕</strong>
                        </button>
                </div>

                <div class="col-2 p-2 text-center d-flex flex-column align-items-center justify-content-center">
                    <span class="text-success ">
                        <strong>
                            {{ item.product.price! | currency:'USD':'symbol':'1.2-2' }}
                        </strong>
                    </span>
                </div>

            </div>
            <hr *ngIf="i < cartItems.length - 1">
        </div>
    </div>

    <hr>

    <!-- TOTAL -->
    <div class="container rounded-4 py-3" [appDarkModeBackground]="'default'">
        <div class="d-flex flex-row justify-content-between align-items-center mx-4 ">
            <h4>Total</h4>
            <h4>
                {{ getTotalPrice() | currency:'USD':'symbol':'1.2-2' }}
            </h4>
        </div>
    </div>

    <br>

    <!-- PAY BUTTON -->
    <div class="container d-flex flex-row justify-content-center">
        <button type="button" class="btn btn-success col">
            Proceed to Payment
        </button>
    </div>

</div>